# PR-10: Docs & UX Copy (Recovery Guide + Strings)

## Title
Provide clear documentation, stable UX copy, and string management for all Data Safety & Recovery operations.

---

## Problem
Technical mechanisms (PR-01–09) only work if users understand them.  
Currently, wording is inconsistent, there are no screenshots or guides, and no admin runbook exists.  
We need **stable user-facing copy** and **documentation** so operations are predictable, non-scary, and supportable.

---

## Scope
### User-Facing Documentation
- `docs/recovery.md`:
  - Step-by-step guide for **Health Check**, **Backup**, **Repair**, **Hard Repair**, **Export**, **Import**.
  - Screenshots of banners, modals, Settings panels.
  - Clear explanation of success, partial, and error states.
  - FAQ: “What does repair do?”, “What if backup fails?”, “What happens if rows are skipped in Hard Repair?”
- Format: Markdown with screenshots in `docs/img/`.

### Admin / Developer Runbook
- `docs/admin/db-ops.md`:
  - CLI usage examples: `db status`, `db backup`, `db repair`, `db hard-repair`, `db export`, `db import`, `reports list/show`.
  - Expected outputs (JSON snippets, exit codes).
  - Troubleshooting: insufficient disk, permission denied, schema mismatch.

### UX Strings
- Centralised JSON/YAML (depending on repo convention):
  - `src/strings/en/recovery.json`
  - Keys for all banners, toasts, errors:
    - `db.unhealthy_banner.title`: "Database issue detected."
    - `db.unhealthy_banner.subtitle`: "Editing is disabled until repair completes."
    - `db.backup.success`: "Backup created ({{size}})."
    - `db.backup.error.disk`: "Not enough disk space (need ~{{size}})."
    - `db.repair.success`: "Repair complete. Your data was verified and restored safely."
    - `db.repair.partial`: "Repair partially succeeded. {{count}} records could not be restored — download report."
    - `db.hard_repair.warning`: "Hard Repair may recover most data but some records may be lost."
    - `db.export.success`: "Export complete ({{size}})."
    - `db.import.success`: "Import complete. {{counts}} records imported."
    - `db.import.dry_run`: "Dry-run complete. No changes applied."
    - `db.import.error.version`: "Export bundle version is not compatible with this app."
- All UI components (banners, modals, toasts) must consume these keys.

### CI Guard
- Script: `scripts/check_strings.sh`
  - Verifies all referenced string keys exist in `recovery.json`.
  - CI fails if missing keys.

---

## Acceptance Criteria
- `docs/recovery.md` contains full walkthrough with screenshots.
- `docs/admin/db-ops.md` contains CLI examples with expected outputs.
- All recovery-related UI copy is drawn from `recovery.json`.
- No hard-coded English strings remain in components.
- CI string guard prevents missing or undefined keys.
- Tests:
  - Lint check passes when new string keys added.
  - UI snapshot tests show correct string injection.

---

## Non-Goals / Out of Scope
- Translations into other languages (future).  
- Video walkthroughs or external docs site hosting.

---

## Risks & Mitigations
- **Docs drift**: screenshots may lag features. → Mitigation: update in same PR as UI changes.  
- **String key sprawl**: enforce naming convention (`db.<op>.<state>`).  
- **Developer forgets to add strings**: CI guard enforces.

---

## Deliverables
- `docs/recovery.md` with screenshots.  
- `docs/admin/db-ops.md` with CLI reference.  
- `src/strings/en/recovery.json`.  
- CI script `scripts/check_strings.sh`.  
- Updates to all UI components to consume string keys.  
- Tests: CI string guard, UI snapshot validation.

---

## Exit Condition
- Users have a clear, illustrated Recovery Guide.  
- Admins have a runbook for CLI ops.  
- UX strings are centralised, consistent, and CI-enforced.  
- No hard-coded English in recovery UI.
