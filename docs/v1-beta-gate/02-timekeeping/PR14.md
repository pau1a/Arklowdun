# PR-14 Mandate — Timezone Context Badge

## Objective
Introduce a **timezone context indicator** in the UI so users can see when an event’s timezone differs from the current app/system timezone.  
Prevent confusion where events appear at odd hours because they were created in or tied to a different timezone.

---

## Scope
- **UI Component:**
  - Create a `TimezoneBadge` primitive in `/src/ui/`.
  - Display a short label with the event’s timezone (e.g., `Europe/London`, `America/New_York`).
  - Tooltip/hover text: *“This event is set in {TZ}. Current app timezone is {AppTZ}.”*
- **Conditional Display:**
  - Badge only appears if event timezone ≠ app/system timezone.
  - No badge for events created in the current timezone.
- **Integration:**
  - Badge displayed in event detail views (Calendar event modal, Notes with deadlines, Files with reminders).
  - Consume event metadata already returned by IPC (event’s `tz` field).
- **Accessibility:**
  - Badge must be keyboard focusable, with tooltip content accessible via aria attributes.
- **Documentation:**
  - Add section to `/docs/timezone-context.md` describing UX rules, copy text, and accessibility behaviours.

---

## Non-Goals
- No user preferences for hiding or overriding badges.  
- No complex styling beyond existing token set (use neutral/info style).  
- No changes to backend recurrence logic.  

---

## Acceptance Criteria
1. **Badge Component:** `TimezoneBadge` exists as reusable primitive with consistent styling.  
2. **Conditional Rendering:** Badge only shown when event timezone ≠ app/system timezone.  
3. **Correct Copy:** Tooltip text correctly states event TZ and app TZ.  
4. **Integration Points:** Badge visible in Calendar event modal, Notes deadline panel, and Files reminder detail.  
5. **Accessibility:** Badge is keyboard focusable and tooltip content announced by screen readers.  
6. **Tests:** Unit tests confirm badge appears only when TZs differ. Integration tests confirm presence across target views.  
7. **Documentation:** `/docs/timezone-context.md` updated with rules, screenshots, and examples.  

---

## Evidence Required in PR
- **UI Screenshot:** Calendar event modal showing `TimezoneBadge` for event in `America/New_York` when app TZ is `Europe/London`.  
- **No-Badge Proof:** Screenshot of event created in current app TZ showing no badge.  
- **Tooltip Demo:** Screen capture showing tooltip content on hover/focus.  
- **Accessibility Proof:** a11y test log showing badge is focusable and tooltip text accessible.  
- **Doc Proof:** `/docs/timezone-context.md` included with UX rules.  

---

## Rollback Plan
- Remove `TimezoneBadge` component and conditional rendering.  
- Delete `/docs/timezone-context.md`.  
- Events remain valid but users lose context about cross-timezone origins.  

---

## PR Title / Description
- **Title:** `feat(timezone-ux): add timezone context badge to event details`  
- **Body:** Must include Objective, Scope, Non-Goals, Acceptance Criteria, Evidence, and Rollback.

---
```
