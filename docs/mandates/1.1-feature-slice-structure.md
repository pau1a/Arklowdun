# 1.1 – Feature-slice skeleton & import aliases (Director’s Brief)

## Objective

Establish a clean, enforceable frontend structure and import aliasing so future work can’t drift back into a ragged, flat layout.

## Scope

- Create the feature-slice structure for **Files, Calendar, Notes, Settings**.
- Introduce **UI primitives** and **layout shells** (placeholders are fine).
- Define **import aliases** and **enforcement rules** (lint/CI).
- Move **one tiny flow** (Files list, read-only) to prove the path—no functional rewrites beyond that.

## Non-Goals (for this PR)

- No styling overhaul, no business-logic migrations beyond the demo flow.
- No new features, no performance work, no IPC contract changes.

## Required Structure (outcome, not code)

- `src/features/{files,calendar,notes,settings}/` each with: `components/`, `api/`, `model/`, `hooks/`, `index.ts` (public surface only).
- `src/ui/` contains primitives (button, input, modal, toast, empty, error, loading).
- `src/layout/` contains shells (page, sidebar, toolbar, content).
- `src/lib/` retains existing cross-cutting helpers (ipc, event-bus, logger).
- `src/store/` contains a small app store scaffold for pane selection and app readiness.

## Import Aliases (policy)

- All **new** imports use `@features/*`, `@ui/*`, `@layout/*`, `@lib/*`, `@store/*`.
- No deep relative imports in new code (no `../../..` patterns).
- React components **do not** import IPC directly; only files under `features/*/api` may talk to the IPC wrapper.

## Demo Flow (prove it works)

- Move the **Files list** view into the new slice:
  - Minimal API wrapper under `features/files/api`.
  - Minimal typed model under `features/files/model`.
  - Hook under `features/files/hooks` that returns loading/data/error.
  - Component under `features/files/components` rendering the three canonical states (loading, empty, error).
  - Public re-export via `features/files/index.ts`.
- Wire the app layout to show the Files list using the new aliases.

## Evidence Ged must attach in the PR (no screenshots of IDEs)

- **Structure proof:** a short pasted directory tree to depth 3 showing the paths above.
- **Alias proof:** a short excerpt list of import lines from at least three files (one per area) demonstrating `@features`, `@ui`, `@layout`.
- **IPC discipline proof:** a concise grep summary (or linter report excerpt) showing **zero** direct IPC imports from any `components/` file.
- **Demo flow proof:** a 30–60s screen recording or GIF of the app navigating to Files and rendering loading → data/empty → error (use any forced error to show the state), with the new primitives visible.
- **Lint/CI proof:** the CI summary indicating the new checks ran and passed (lint, type, build).
- **Rollback note:** one paragraph describing how to revert to the prior flat layout if needed (paths to remove and files to move back).

## Acceptance Criteria (merge gate)

- The required structure exists exactly as specified; no extra top-level feature folders.
- New imports use aliases exclusively; no deep relative paths in new or moved files.
- No React component imports the IPC module; all IPC goes through `features/*/api`.
- Files list demo runs through the new layout and primitives and shows all three UI states.
- Lint/CI includes an **import-alias rule** and an **IPC-in-components ban**, both green.
- PR description includes a one-paragraph **scope** and a one-paragraph **non-goals** section linking to this mandate.

## Review Checklist (what reviewers must verify)

- Structure matches the brief; public surfaces are limited to each `index.ts`.
- No cross-feature imports except via the feature’s `index.ts` public surface.
- Primitives and layout are used (no raw ad-hoc elements in the demo).
- Error/loading/empty states are present and consistent.
- Alias and IPC rules are enforced by tooling (not “social contract”).
- The demo did not smuggle in unrelated refactors or features.

## Risks & Mitigations

- **Risk:** Hidden deep relative imports remain.
  **Mitigation:** Add a linter rule/CI check that fails the PR on patterns indicating deep relatives in app code.
- **Risk:** Components silently import IPC later.
  **Mitigation:** Add a linter rule/CI check that fails when any `components/` file imports IPC libraries.
- **Risk:** Overreach creep in the demo.
  **Mitigation:** Hard cap the demo to list-only read path; any extras go to a follow-up PR.

## Follow-ups (deferred to 1.2+)

- Migrate Calendar/Notes/Settings into the slice model.
- Replace ad-hoc elements with primitives across the app.
- Introduce route-driven state and store slices per feature.
- Add Story/preview pages for primitives.

## PR Title / Description format

- **Title:** `chore(structure): introduce feature-slice skeleton with aliases (+ files list demo)`
- **Body:** Link to this mandate; include **Evidence** and **Acceptance** sections above.
